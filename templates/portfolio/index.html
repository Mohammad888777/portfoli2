{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nasim SalehNia Studio</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">

    <link rel="shortcut icon" href="{% static 'logo.png' %}" type="image/x-icon">

    
 <!-- NOTIFICATION -->

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">

    <!-- JS Toastr -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>


    <style>
                /* TOSTER */

         .toast-top-left {
        top: 20px;
        left: 20px;
    }

    .toast-top-right {
        top: 20px;
        right: 20px;
    }

    .toast-bottom-left {
        bottom: 20px;
        left: 20px;
    }

    .toast-bottom-right {
        bottom: 20px;
        right: 20px;
    }

    .toast-center {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        position: fixed;
    }

    .toast-middle {
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        position: fixed;
    }

    </style>

</head>
<body>
    <!-- Navigation -->
    <!-- <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <a href="{% url 'portfolio' %}">
                    <img src="{% static 'logo.png' %}" alt="">
                </a>
            </div>
            <ul class="nav-links">
                <li><a href="#home">Home</a></li>
                <li><a href="#about">About</a></li>
                <li><a href="#services">Services</a></li>
                <li><a href="#contact">Contact</a></li>
            </ul>
        </div>
    </nav> -->
<nav class="navbar">
    <div class="logo">
        <a href="{% url 'portfolio' %}">
            <img src="{% static 'logo.png' %}" alt="">
        </a>
    </div>
    <ul class="nav-links">
        <li><a href="#home">Home</a></li>
        <li><a href="#about">About</a></li>
        <li><a href="#services">Services</a></li>
        <li><a href="#contact">Contact</a></li>
    </ul>
</nav>

    

    <!-- Hero Section -->
    <!-- <section id="home" class="hero">
        <div class="floating-shapes">
            <div class="shape"></div>
            <div class="shape"></div>
            <div class="shape"></div>
        </div>
        <div class="hero-content">
            <h1>Architectural Excellence</h1>
            <p>Creating spaces that inspire and transform</p>
            <a href="#portfolio" class="cta-button">View Our Work</a>
        </div>
    </section> -->

    <!-- Portfolio Section -->
    <section id="portfolio" class="portfolio">
        <div class="">
            <!-- <h2 class="section-title">Featured Projects</h2> -->
            
            <!-- Main Slideshow -->
             
             <br>
          
            <div class="main-slideshow">
                {% for slider in sliders %}
                    {% if slider.image %}
                        <div class="slide {% if forloop.first %}active{% endif %}" style="background-image: linear-gradient(rgba(0,0,0,0.3), rgba(0,0,0,0.3)), url('{{ slider.image.url }}')">
                            <div class="slide-content">
                                <!-- {% if slider.title %}
                                    <h3>{{ slider.title|default:"Untitled" }}</h3>
                                {% endif %} -->
                                {% if slider.description %}
                                    <h2>{{ slider.description|default:"No description available" }}</h2>
                                {% endif %}
                            </div>
                        </div>
                    {% endif %}
                {% empty %}
                <div class="slide active">
                    <div class="slide-content">
                        <h3>No Slides Available</h3>
                        <p>Please add slides in the admin panel.</p>
                    </div>
                </div>
                {% endfor %}
                <div class="slideshow-nav">
                    {% for slider in sliders %}
                    <div class="nav-dot {% if forloop.first %}active{% endif %}" onclick="currentSlide({{ forloop.counter }})"></div>
                    {% endfor %}
                </div>
            </div>

            <!-- Project Grid -->
            <div class="project-grid">
                {% for project in projects %}
                    {% if project.image %}
                        <div class="project-card" onclick="openProject('{{ project.id }}')">
                            <div class="project-image" style="background-image: url('{{ project.image.url|default:'/media/placeholder.jpg' }}')">
                                <div class="project-overlay">
                                    <span style="color: white; font-size: 1.2rem; font-weight: bold;">View Project</span>
                                </div>
                            </div>
                            
                        </div>
                    {% endif %}
                {% empty %}
                <p>No projects available.</p>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Hero Project Section -->
    <!-- <section class="hero-project">
        <div class="container">
            <div class="hero-project-container">
                {% if hero_project %}
                <div class="hero-project-image" onclick="openHeroProject('{{ hero_project.id }}')">
                    <img src="{{ hero_project.image.url|default:'/media/placeholder.jpg' }}" alt="{{ hero_project.title|default:'Featured Project' }}">
                    <div class="hero-project-overlay">
                        <h3>{{ hero_project.title|default:"Untitled" }}</h3>
                        <p>Click to explore</p>
                    </div>
                </div>
                {% else %}
                <p>No hero project selected.</p>
                {% endif %}
            </div>
        </div>
    </section> -->

    <!-- Staggered Gallery Section -->
     
    <section class="staggered-gallery">
        <div class="">
            <div class="gallery-grid">
                {% for gallery in galleries %}
                {% if gallery.image%}
                    <div class="gallery-item {% cycle 'left' 'right' %}" onclick="openGallery({{ forloop.counter0 }})">
                        <img src="{{ gallery.image.url|default:'/media/placeholder.jpg' }}" alt="{{ gallery.title|default:'Gallery Image' }}">
                        <div class="gallery-overlay">
                            {% if gallery.title %}
                                <h4>{{ gallery.title|default:"Untitled" }}</h4>
                            {% endif %}
                            {% if gallery.subject %}
                                <p>{{ gallery.subject|default:"No subject" }}</p>
                            {% endif %}
                        </div>
                    </div>
                {% endif %}
                {% empty %}
                <p>No gallery items available.</p>
                {% endfor %}
            </div>
        </div>
    </section>

    <!-- Hero Project Modal -->
    <div id="heroProjectModal" class="hero-project-modal">
        <div class="hero-modal-content">
            <div class="hero-modal-left">
                <div class="hero-project-info">
                    <h2 id="heroProjectTitle"></h2>
                    <p id="heroProjectDescription"></p>
                    <div class="hero-project-details">
                        <div class="hero-detail-item">
                            <span class="hero-detail-label">Area:</span>
                            <span class="hero-detail-value" id="heroArea"></span>
                        </div>
                        <!-- <div class="hero-detail-item">
                            <span class="hero-detail-label">Bedrooms:</span>
                            <span class="hero-detail-value" id="heroBedrooms"></span>
                        </div> -->
                        <!-- <div class="hero-detail-item">
                            <span class="hero-detail-label">Bathrooms:</span>
                            <span class="hero-detail-value" id="heroBathrooms"></span>
                        </div> -->
                        <div class="hero-detail-item">
                            <span class="hero-detail-label">Year:</span>
                            <span class="hero-detail-value" id="heroYear"></span>
                        </div>
                        <div class="hero-detail-item">
                            <span class="hero-detail-label">Location:</span>
                            <span class="hero-detail-value" id="heroLocation"></span>
                        </div>
                        <!-- <div class="hero-detail-item">
                            <span class="hero-detail-label">Style:</span>
                            <span class="hero-detail-value" id="heroStyle"></span>
                        </div> -->
                    </div>
                    <div class="hero-slide-counter">
                        <span id="heroCurrentSlide">1</span> / <span id="heroTotalSlides"></span>
                    </div>
                </div>
            </div>
            <div class="hero-modal-right" onclick="nextHeroSlide()">
                <div class="hero-slideshow" id="heroSlideshow"></div>
                <div class="hero-click-hint">Click to advance ‚Üí</div>
            </div>
        </div>
    </div>

    <!-- Gallery Modal -->
    <div id="galleryModal" class="gallery-modal">
        <div class="gallery-modal-content">
            <button class="gallery-close" onclick="closeGallery()">&times;</button>
            <div class="gallery-modal-counter">
                <span id="galleryCurrentSlide">1</span> / <span id="galleryTotalSlides"></span>
            </div>
            <div class="gallery-nav-zone left" onclick="prevGallerySlide()">
                <div class="gallery-nav-arrow">‚Äπ</div>
            </div>
            <div class="gallery-nav-zone right" onclick="nextGallerySlide()">
                <div class="gallery-nav-arrow">‚Ä∫</div>
            </div>
            <img id="galleryModalImage" class="gallery-modal-image" src="" alt="Gallery Image">
            <div class="gallery-modal-title">
                <h3 id="galleryModalTitle"></h3>
                <p id="galleryModalDescription"></p>
            </div>
            <div class="gallery-scroll-hint">Tap sides or scroll to navigate</div>
        </div>
    </div>

    <!-- About Section -->
    <section id="about" class="about">
        <div class="">
            <div class="about-content">
                <div class="about-text">
                    <h2>About</h2>
                    {% if a.description %}
                        <p>
                            {{a.description}}
                        </p>
                    {% endif %}

                    <div class="stats">
                        <div class="stat-item">
                        {% if a.project_completed %}
                            <div class="stat-number">{{a.project_completed}}+</div>
                            <div class="stat-label">Projects Completed</div>
                        {% endif %}
                        </div>
                        {% if a.awards %}
                        <div class="stat-item">
                            <div class="stat-number">{{a.awards}}+</div>
                            <div class="stat-label">Awards Won</div>
                        </div>
                        {% endif %}
                        {% if a.years_experience %}
                        <div class="stat-item">
                            <div class="stat-number">{{a.years_experience}}</div>
                            <div class="stat-label">Years Experience</div>
                        </div>
                        {% endif %}
                        {% if a.satisfaction %}
                        <div class="stat-item">
                            <div class="stat-number">{{a.satisfaction}}%</div>
                            <div class="stat-label">Client Satisfaction</div>
                        </div>
                        {% endif %}
                    </div>
                </div>
                {% if a.image %}

                <style>
                                    .about img {
                    max-width: 100%;  /* ÿπÿ±ÿ∂ ÿ™ÿµŸà€åÿ± ŸÜÿ®ÿß€åÿØ ÿßÿ≤ ÿπÿ±ÿ∂ ŸàÿßŸÑÿØ ÿ®€åÿ¥ÿ™ÿ± ÿ®ÿßÿ¥ÿØ */
                    max-height: 800px;  /* ÿ≠ÿØÿß⁄©ÿ´ÿ± ÿßÿ±ÿ™ŸÅÿßÿπ ÿ™ÿµŸà€åÿ± ÿ±ÿß ÿ™ŸÜÿ∏€åŸÖ ⁄©ŸÜ€åÿØ */
                    height: auto;
                    object-fit: contain;
                    border-radius: 20px;
                }

                </style>
                <div class="md:w-1/2">
                    <img src="{{ a.image.url }}" alt="About Me Image" class="w-full max-w-sm h-auto object-contain rounded-lg shadow-lg">
                </div>
                {% endif %}
            </div>
        </div>
    </section>

    <!-- About Section -->


    <section id="services" class="services">
        <div class="">
            <h2 class="section-title">Our Services</h2>
            <div class="services-grid">
                {% for i in service %}
                <div class="service-card">
                    {% if i.title %}
                    <!-- <div class="service-icon">üèóÔ∏è</div> -->
                        <h4>{{i.title}}</h4>
                    {% endif %}
                    {% if i.description %}
                        <p>{{i.description}}</p>
                    {% endif %}
                </div>
                {% endfor %}

       

            </div>
        </div>
    </section>

    <!-- Contact Section -->

    <section id="contact" class="contact">
        <div class="">
            <h2 class="section-title" style="color: white;">Get In Touch</h2>
            <div class="contact-content">
                <div>
                    <h3 style="font-size: 2rem; margin-bottom: 1rem;">Let's Create Something Amazing Together</h3>
                    <p style="font-size: 1.1rem; margin-bottom: 2rem;">Ready to bring your architectural vision to life? We'd love to hear about your project and discuss how we can help.</p>
                    <div style="margin-bottom: 1rem;">
                        <strong> Address:</strong><br>
                        {% if a.address %}
                            {{a.address}}
                        {% endif %}
                    </div>
                    <div style="margin-bottom: 1rem;">
                        {% if a.phone %}
                            <strong> Phone:</strong> +{{a.phone}}
                        {% endif %}
                    </div>
                    <div>
                        {% if a.myemail %}
                            <strong> Email:</strong> {{a.myemail}}
                        {% endif %}
                    </div>
                </div>
                <form class="contact-form"  id="formContact">
                    <div class="form-group">
                        <input type="text" placeholder="Your Name" name="name">
                    </div>
                    <div class="form-group">
                        <input type="email" placeholder="Your Email" name="email">
                    </div>
                    <div class="form-group">
                        <input type="text" placeholder="Project Type" name="project">
                    </div>
                    <div class="form-group">
                        <textarea rows="5" placeholder="Tell us about your project..." id="textValue"></textarea>
                    </div>
                    <button type="submit" class="submit-btn">Send Message</button>
                </form>


                <script  >

                    function showNotification(type, message, title, positionClass) {
                            toastr.options = {
                            "closeButton": true,
                            "debug": false,
                            "newestOnTop": false,
                            "progressBar": true,
                            "positionClass": positionClass || "toast-top-right", // ŸÖŸàŸÇÿπ€åÿ™ ŸÜŸàÿ™€åŸÅ€å⁄©€åÿ¥ŸÜ
                            "preventDuplicates": false,
                            "onclick": null,
                            "showDuration": "4000",
                            "hideDuration": "2000",
                            "timeOut": "5000",
                            "extendedTimeOut": "1000",
                            "showEasing": "swing",
                            "hideEasing": "linear",
                            "showMethod": "fadeIn",
                            "hideMethod": "fadeOut"
                        };

                        // ŸÜŸÖÿß€åÿ¥ ŸÜŸàÿ™€åŸÅ€å⁄©€åÿ¥ŸÜ ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ŸÜŸàÿπ ÿ¢ŸÜ
                        switch (type) {
                            case 'success':
                                toastr.success(message, title);
                                break;
                            case 'error':
                                toastr.error(message, title);
                                break;
                            case 'warning':
                                toastr.warning(message, title);
                                break;
                            case 'info':
                                toastr.info(message, title);
                                break;
                            default:
                                toastr.info(message, title);
                        }
                    }


                    $(document).ready(function(e){
                        $("#formContact").submit(function(e){
                            e.preventDefault();

                            let name=$("input[type=text][name=name]").val()
                            let email=$("input[type=email]").val()
                            let project=$("input[type=text][name=project]").val()
                            let subject=$("#textValue").val()

                            if (!name){
                                showNotification('error', "please enter your name", '', 'toast-middle');
                            }

                            else if(!email){
                                showNotification('error', "please enter your email address", '', 'toast-middle');

                            }else if(!project){
                                showNotification('error', "please enter your project", '', 'toast-middle');

                            }else if(!subject){
                                showNotification('error', "please tell me about your project", '', 'toast-middle');

                            }

                            

                            else {

                                let formData=new FormData()

                                formData.append("name",name)
                                formData.append("email",email)
                                formData.append("project",project)
                                formData.append("subject",subject)
                                
                                $.ajax({
                                    url:"/aware/",
                                    type:"POST",
                                    data:formData,
                                    data: formData,
                                    processData: false,
                                    contentType: false,
                                    success:function(e){
                                        if(e.send){
                                            $("button[type=submit]").attr("disabled","disabled")
                                            showNotification('success', "Thank you for your message! i will keep in touch", '', 'toast-middle');
                                            function timeSet(){
        
                                                            window.location.reload()
                                                        }
                        
                                                        const forSEtTime=setTimeout(timeSet,3500)
                                        }
                                        console.log(e)
                                    }
                                })
                            }



                        })
                    })
                    
                    

                </script>
            </div>
        </div>
    </section>



    <!-- Project Modal -->
    <div id="projectModal" class="project-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle"></h2>
                <button class="modal-close" onclick="closeModal()">&times;</button>
            </div>
            <div class="modal-slideshow">
                <div id="modalSlides"></div>
                <button class="modal-nav modal-prev" onclick="changeModalSlide(-1)">&#10094;</button>
                <button class="modal-nav modal-next" onclick="changeModalSlide(1)">&#10095;</button>
                <div class="modal-dots" id="modalDots"></div>
            </div>
            <div class="modal-info">
                <h3 id="modalProjectName"></h3>
                <p id="modalDescription"></p>
                <div class="project-details" id="modalDetails"></div>
            </div>
        </div>
    </div>


<button class="scroll-top-btn" onclick="scrollToTop()" title="Go to Top">‚Üë</button>

    <script>
        // Slideshow functionality
        let slideIndex = 1;

        function currentSlide(n) {
            showSlide(slideIndex = n);
        }

        function showSlide(n) {
            const slides = document.querySelectorAll('.slide');
            const dots = document.querySelectorAll('.nav-dot');

            if (n > slides.length) { slideIndex = 1; }
            if (n < 1) { slideIndex = slides.length; }

            slides.forEach(slide => slide.classList.remove('active'));
            dots.forEach(dot => dot.classList.remove('active'));

            slides[slideIndex - 1].classList.add('active');
            dots[slideIndex - 1].classList.add('active');
        }

        // Auto-advance slideshow
        setInterval(() => {
            slideIndex++;
            if (slideIndex > document.querySelectorAll('.slide').length) slideIndex = 1;
            showSlide(slideIndex);
        }, 5000);

        // Project data (loaded dynamically)
        const projectData = {
            {% for project in projects %}
            '{{ project.id }}': {
                title: "{{ project.title|default:'Untitled'|escapejs }}",
                name: "{{ project.title|default:'Untitled'|escapejs }}",
                description: "{{ project.description|default:'No description available'|escapejs }}",
                description2: "{{ project.description2|default:'No additional description'|escapejs }}",
                images: [
                    "{{ project.image.url|default:'/media/placeholder.jpg'|escapejs }}",
                    {% for child in project.projectchild_set.all %}
                    "{{ child.image.url|default:'/media/placeholder.jpg'|escapejs }}"{% if not forloop.last %},{% endif %}
                    {% endfor %}
                ],
                details: {
                    "Type": "{{ project.type|default:'N/A'|escapejs }}",
                    // "Bedrooms": "{{ project.bedrooms|default:'N/A'|escapejs }}",
                    // "Bathrooms": "{{ project.bathrooms|default:'N/A'|escapejs }}",
                    "Status": "{{ project.status|default:'N/A'|escapejs }}",
                    "Scale": "{{ project.scale|default:'N/A'|escapejs }}",
                    // "Style": "{{ project.style|default:'N/A'|escapejs }}"
                }
            }{% if not forloop.last %},{% endif %}
            {% endfor %}
        };

        // Hero Project data
        const heroSlideData = {
            {% if hero_project %}
            '{{ hero_project.id }}': [
                {% for child in hero_project.projectchild_set.all %}
                {
                    title: "{{ hero_project.title|default:'Untitled'|escapejs }}",
                    description: "{{ hero_project.description|default:'No description available'|escapejs }}",
                    area: "{{ hero_project.type|default:'N/A'|escapejs }}",
                    // bedrooms: "{{ hero_project.bedrooms|default:'N/A'|escapejs }}",
                    // bathrooms: "{{ hero_project.bathrooms|default:'N/A'|escapejs }}",
                    year: "{{ hero_project.status|default:'N/A'|escapejs }}",
                    location: "{{ hero_project.scale|default:'N/A'|escapejs }}",
                    // style: "{{ hero_project.style|default:'N/A'|escapejs }}",
                    image: "{{ child.image.url|default:'/media/placeholder.jpg'|escapejs }}"
                }{% if not forloop.last %},{% endif %}
                {% endfor %}
            ]
            {% endif %}
        };

        // Gallery data
        const galleryData = [
            {% for gallery in galleries %}
            {
                title: "{{ gallery.title|default:'Untitled'|escapejs }}",
                description: "{{ gallery.subject|default:'No subject'|escapejs }}",
                images: [
                    "{{ gallery.image.url|default:'/media/placeholder.jpg'|escapejs }}",
                    {% for child in gallery.gallerychild_set.all %}
                    "{{ child.image.url|default:'/media/placeholder.jpg'|escapejs }}"{% if not forloop.last %},{% endif %}
                    {% endfor %}
                ]
            }{% if not forloop.last %},{% endif %}
            {% endfor %}
        ];

        // Gallery functionality
        let currentGalleryProject = 0;
        let currentGallerySlide = 0;
        let allGalleryImages = [];
        let galleryTitles = [];
        let touchStartY = 0;
        let touchStartX = 0;

        function initializeGallery() {
            allGalleryImages = [];
            galleryTitles = [];

            galleryData.forEach(project => {
                project.images.forEach(image => {
                    allGalleryImages.push(image);
                    galleryTitles.push({
                        title: project.title,
                        description: project.description
                    });
                });
            });
        }

        function openGallery(projectIndex) {
            initializeGallery();
            currentGallerySlide = 0;
            for (let i = 0; i < projectIndex; i++) {
                currentGallerySlide += galleryData[i].images.length;
            }
            document.getElementById('galleryModal').classList.add('active');
            updateGallerySlide();

            document.addEventListener('wheel', handleGalleryScroll, { passive: false });
            document.addEventListener('touchstart', handleGalleryTouchStart, { passive: false });
            document.addEventListener('touchmove', handleGalleryTouchMove, { passive: false });
            document.addEventListener('touchend', handleGalleryTouchEnd, { passive: false });
        }

        function closeGallery() {
            document.getElementById('galleryModal').classList.remove('active');
            document.removeEventListener('wheel', handleGalleryScroll);
            document.removeEventListener('touchstart', handleGalleryTouchStart);
            document.removeEventListener('touchmove', handleGalleryTouchMove);
            document.removeEventListener('touchend', handleGalleryTouchEnd);
        }

        function handleGalleryScroll(e) {
            e.preventDefault();
            if (e.deltaY > 0) {
                nextGallerySlide();
            } else {
                prevGallerySlide();
            }
        }

        function handleGalleryTouchStart(e) {
            touchStartY = e.touches[0].clientY;
            touchStartX = e.touches[0].clientX;
        }

        function handleGalleryTouchMove(e) {
            e.preventDefault();
        }

        function handleGalleryTouchEnd(e) {
            if (!touchStartY || !touchStartX) return;
            const touchEndY = e.changedTouches[0].clientY;
            const touchEndX = e.changedTouches[0].clientX;
            const diffY = touchStartY - touchEndY;
            const diffX = touchStartX - touchEndX;

            if (Math.abs(diffY) > Math.abs(diffX) && Math.abs(diffY) > 50) {
                if (diffY > 0) {
                    nextGallerySlide();
                } else {
                    prevGallerySlide();
                }
            }
            touchStartY = 0;
            touchStartX = 0;
        }

        function nextGallerySlide() {
            currentGallerySlide = (currentGallerySlide + 1) % allGalleryImages.length;
            updateGallerySlide();
        }

        function prevGallerySlide() {
            currentGallerySlide = (currentGallerySlide - 1 + allGalleryImages.length) % allGalleryImages.length;
            updateGallerySlide();
        }

        function updateGallerySlide() {
            const image = document.getElementById('galleryModalImage');
            const title = document.getElementById('galleryModalTitle');
            const description = document.getElementById('galleryModalDescription');
            const counter = document.getElementById('galleryCurrentSlide');
            const total = document.getElementById('galleryTotalSlides');

            image.style.opacity = '0';
            setTimeout(() => {
                image.src = allGalleryImages[currentGallerySlide];
                title.textContent = galleryTitles[currentGallerySlide].title;
                description.textContent = galleryTitles[currentGallerySlide].description;
                counter.textContent = currentGallerySlide + 1;
                total.textContent = allGalleryImages.length;
                image.style.opacity = '1';
            }, 250);
        }

        // Hero Project functionality
        let currentHeroSlide = 0;

        function openHeroProject(projectId) {
            const slidesContainer = document.getElementById('heroSlideshow');
            slidesContainer.innerHTML = '';
            const slides = heroSlideData[projectId] || [];
            slides.forEach((slide, index) => {
                const div = document.createElement('div');
                div.className = `hero-slide ${index === 0 ? 'active' : ''}`;
                div.style.backgroundImage = `url('${slide.image}')`;
                slidesContainer.appendChild(div);
            });

            document.getElementById('heroProjectModal').classList.add('active');
            currentHeroSlide = 0;
            updateHeroSlide(projectId);
        }

        function closeHeroProject() {
            document.getElementById('heroProjectModal').classList.remove('active');
        }

        function nextHeroSlide() {
            const slides = document.querySelectorAll('.hero-slide');
            slides[currentHeroSlide].classList.add('prev');
            slides[currentHeroSlide].classList.remove('active');
            currentHeroSlide = (currentHeroSlide + 1) % slides.length;
            setTimeout(() => {
                slides.forEach(slide => slide.classList.remove('prev'));
                slides[currentHeroSlide].classList.add('active');
                updateHeroSlide(Object.keys(heroSlideData)[0]);
            }, 100);
        }

        function updateHeroSlide(projectId) {
            const data = heroSlideData[projectId][currentHeroSlide];
            document.getElementById('heroProjectTitle').textContent = data.title;
            document.getElementById('heroProjectDescription').textContent = data.description;
            document.getElementById('heroArea').textContent = data.area;
            // document.getElementById('heroBedrooms').textContent = data.bedrooms;
            // document.getElementById('heroBathrooms').textContent = data.bathrooms;
            document.getElementById('heroYear').textContent = data.year;
            document.getElementById('heroLocation').textContent = data.location;
            // document.getElementById('heroStyle').textContent = data.style;
            document.getElementById('heroCurrentSlide').textContent = currentHeroSlide + 1;
            document.getElementById('heroTotalSlides').textContent = heroSlideData[projectId].length;
        }

        // Project modal functionality
        let currentModalSlide = 0;
        let modalSlideInterval;

        function openProject(projectId) {
            const project = projectData[projectId];
            if (!project) return;

            document.getElementById('modalTitle').textContent = project.title;
            document.getElementById('modalProjectName').textContent = project.name;
            document.getElementById('modalDescription').textContent = project.description;

            const slidesContainer = document.getElementById('modalSlides');
            slidesContainer.innerHTML = '';
            project.images.forEach((image, index) => {
                const slide = document.createElement('div');
                slide.className = `modal-slide ${index === 0 ? 'active' : ''}`;
                slide.style.backgroundImage = `url('${image}')`;
                slidesContainer.appendChild(slide);
            });

            const dotsContainer = document.getElementById('modalDots');
            dotsContainer.innerHTML = '';
            project.images.forEach((_, index) => {
                const dot = document.createElement('div');
                dot.className = `modal-dot ${index === 0 ? 'active' : ''}`;
                dot.onclick = () => goToModalSlide(index);
                dotsContainer.appendChild(dot);
            });

            // const detailsContainer = document.getElementById('modalDetails');
            // detailsContainer.innerHTML = '';
            // Object.entries(project.details).forEach(([label, value]) => {
            //     const detailItem = document.createElement('div');
            //     detailItem.className = 'detail-item';
            //     detailItem.innerHTML = `
            //         <div class="detail-label">${label}</div>
            //         <div class="detail-value">${value}</div>
            //     `;
            //     detailsContainer.appendChild(detailItem);
            // });


            const detailsContainer = document.getElementById('modalDetails');
detailsContainer.innerHTML = '';
Object.entries(project.details).forEach(([label, value]) => {
    const detailItem = document.createElement('div');
    detailItem.className = 'detail-item';
    detailItem.innerHTML = `
        <div class="detail-label">${label} :</div>  <!-- : added here -->
        <div class="detail-value">${value}</div>
    `;
    detailsContainer.appendChild(detailItem);
});


            document.getElementById('projectModal').classList.add('active');
            currentModalSlide = 0;
            startModalSlideshow(project.images.length);
        }

        function closeModal() {
            document.getElementById('projectModal').classList.remove('active');
            stopModalSlideshow();
        }

        function startModalSlideshow(totalSlides) {
            stopModalSlideshow();
            modalSlideInterval = setInterval(() => {
                currentModalSlide = (currentModalSlide + 1) % totalSlides;
                showModalSlide(currentModalSlide);
            }, 4000);
        }

        function stopModalSlideshow() {
            if (modalSlideInterval) {
                clearInterval(modalSlideInterval);
                modalSlideInterval = null;
            }
        }

        function changeModalSlide(direction) {
            const slides = document.querySelectorAll('.modal-slide');
            const totalSlides = slides.length;
            currentModalSlide = (currentModalSlide + direction + totalSlides) % totalSlides;
            showModalSlide(currentModalSlide);
            startModalSlideshow(totalSlides);
        }

        function goToModalSlide(index) {
            currentModalSlide = index;
            showModalSlide(currentModalSlide);
            const slides = document.querySelectorAll('.modal-slide');
            startModalSlideshow(slides.length);
        }

        function showModalSlide(index) {
            const slides = document.querySelectorAll('.modal-slide');
            const dots = document.querySelectorAll('.modal-dot');
            slides.forEach((slide, i) => {
                slide.classList.remove('active');
                if (i === index) {
                    slide.classList.add('active');
                }
            });
            dots.forEach((dot, i) => {
                dot.classList.remove('active');
                if (i === index) {
                    dot.classList.add('active');
                }
            });
        }

        // Event listeners
        document.getElementById('galleryModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeGallery();
            }
        });

        document.querySelector('.gallery-modal-content').addEventListener('click', function(e) {
            e.stopPropagation();
        });

        document.querySelectorAll('.gallery-nav-zone').forEach(zone => {
            zone.addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });

        document.getElementById('heroProjectModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeHeroProject();
            }
        });

        document.querySelector('.hero-modal-content').addEventListener('click', function(e) {
            e.stopPropagation();
        });

        document.getElementById('projectModal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
                closeGallery();
                closeHeroProject();
            }
        });

        // function handleSubmit(event) {
        //     event.preventDefault();
        //     alert('Thank you for your message! We\'ll get back to you soon. (This is a demo form)');
        // }

        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            if (window.scrollY > 100) {
                navbar.style.background = 'rgba(255, 255, 255, 0.98)';
                navbar.style.boxShadow = '0 2px 20px rgba(0,0,0,0.1)';
            } else {
                navbar.style.background = 'rgba(255, 255, 255, 0.95)';
                navbar.style.boxShadow = 'none';
            }
        });

        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.animation = 'fadeInUp 1s ease forwards';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.project-card, .service-card, .stat-item').forEach(el => {
            observer.observe(el);
        });

        // Puzzle Animation
        let puzzleAnimated = false;
        let puzzlePieces = [];

        // function createPuzzle() {
        //     const puzzleGrid = document.getElementById('puzzleGrid');
        //     const isMobile = window.innerWidth <= 768;
        //     const totalPieces = isMobile ? 12 : 24;
        //     puzzleGrid.innerHTML = '';
        //     puzzlePieces = [];
        //     for (let i = 0; i < totalPieces; i++) {
        //         const piece = document.createElement('div');
        //         piece.className = 'puzzle-piece';
        //         puzzleGrid.appendChild(piece);
        //         puzzlePieces.push({
        //             element: piece,
        //             revealed: false,
        //             order: Math.random()
        //         });
        //     }
        //     puzzlePieces.sort((a, b) => a.order - b.order);
        // }


        function createPuzzle() {
    const puzzleGrid = document.getElementById('puzzleGrid');
    const isMobile = window.innerWidth <= 768;
    const totalPieces = isMobile ? 12 : 24;  // ÿ™ÿπÿØÿßÿØ ÿ™⁄©Ÿá‚ÄåŸáÿß€å Ÿæÿßÿ≤ŸÑ ÿ®ÿ± ÿßÿ≥ÿßÿ≥ ÿßŸÜÿØÿßÿ≤Ÿá ÿµŸÅÿ≠Ÿá
    puzzleGrid.innerHTML = '';  // ÿßÿ®ÿ™ÿØÿß ŸÖÿ≠ÿ™Ÿàÿß€å ŸÇÿ®ŸÑ€å Ÿæÿßÿ≤ŸÑ ÿ±ÿß Ÿæÿß⁄© ŸÖ€å‚Äå⁄©ŸÜ€åŸÖ
    puzzlePieces = [];
    
    // ÿß€åŸÜÿ¨ÿß ŸÖÿ≥€åÿ± ÿπ⁄©ÿ≥ ÿ¥ŸÖÿß ÿ±ÿß ŸÇÿ±ÿßÿ± ŸÖ€å‚ÄåÿØŸá€åŸÖ

    const imageUrl = "{{a.image.url}}";  // ŸÖÿ≥€åÿ± ÿπ⁄©ÿ≥ ÿ¥ŸÖÿß

    // ÿß€åÿ¨ÿßÿØ ÿ™⁄©Ÿá‚ÄåŸáÿß€å Ÿæÿßÿ≤ŸÑ
    for (let i = 0; i < totalPieces; i++) {
        const piece = document.createElement('div');
        piece.className = 'puzzle-piece';
        
        // ÿ™ŸÜÿ∏€åŸÖ ÿ™ÿµŸà€åÿ± Ÿæÿßÿ≤ŸÑ
        piece.style.backgroundImage = `url('${imageUrl}')`;
        piece.style.backgroundSize = 'cover';  // ÿ™ÿµŸà€åÿ± ÿ®Ÿá ÿ∑Ÿàÿ± ⁄©ÿßŸÖŸÑ ŸæŸàÿ¥ÿ¥ ŸÖ€å‚ÄåÿØŸáÿØ
        piece.style.backgroundPosition = `-${(i % 4) * 25}% -${Math.floor(i / 4) * 25}%`;  // ŸÖŸàŸÇÿπ€åÿ™ ÿ™⁄©Ÿá‚ÄåŸáÿß€å Ÿæÿßÿ≤ŸÑ

        puzzleGrid.appendChild(piece);
        puzzlePieces.push({
            element: piece,
            revealed: false,
            order: Math.random()
        });
    }

    puzzlePieces.sort((a, b) => a.order - b.order);
}


        function animatePuzzleOnScroll() {
            const aboutSection = document.getElementById('about');
            const puzzleContainer = document.querySelector('.puzzle-container');
            if (!aboutSection || !puzzleContainer) return;
            const sectionRect = aboutSection.getBoundingClientRect();
            const windowHeight = window.innerHeight;
            if (sectionRect.top < windowHeight && sectionRect.bottom > 0) {
                const sectionHeight = sectionRect.height;
                const visibleTop = Math.max(0, -sectionRect.top);
                const scrollProgress = visibleTop / (sectionHeight - windowHeight + 200);
                const clampedProgress = Math.max(0, Math.min(1, scrollProgress));
                const totalPieces = puzzlePieces.length;
                const piecesToReveal = Math.floor(clampedProgress * totalPieces);
                const unrevealedPieces = puzzlePieces.filter(piece => !piece.revealed);
                const piecesToRevealNow = Math.min(piecesToReveal - puzzlePieces.filter(p => p.revealed).length, unrevealedPieces.length);
                for (let i = 0; i < piecesToRevealNow; i++) {
                    if (unrevealedPieces.length > 0) {
                        const randomIndex = Math.floor(Math.random() * unrevealedPieces.length);
                        const pieceToReveal = unrevealedPieces[randomIndex];
                        setTimeout(() => {
                            pieceToReveal.element.classList.add('revealed');
                            pieceToReveal.revealed = true;
                        }, Math.random() * 300);
                        unrevealedPieces.splice(randomIndex, 1);
                    }
                }
                const revealedCount = puzzlePieces.filter(p => p.revealed).length;
                if (revealedCount >= totalPieces && !puzzleAnimated) {
                    puzzleAnimated = true;
                    setTimeout(() => {
                        showRealImage();
                    }, 500);
                }
            }
        }

        // function showRealImage() {
        //     const puzzleContainer = document.querySelector('.puzzle-container');
        //     const realImage = document.createElement('div');
        //     realImage.className = 'real-image';
            
        //     puzzleContainer.appendChild(realImage);
        //     setTimeout(() => {
        //         realImage.classList.add('show');
        //     }, 100);
        // }


        function showRealImage() {
    const puzzleContainer = document.querySelector('.puzzle-container');
    const realImage = document.createElement('div');
    realImage.className = 'real-image';

    // ŸÖÿ≥€åÿ± ÿπ⁄©ÿ≥ ÿÆŸàÿØÿ™ÿßŸÜ ÿ±ÿß ÿØÿ± ÿß€åŸÜÿ¨ÿß ŸÇÿ±ÿßÿ± ÿØŸá€åÿØ
    const image = document.createElement('img');
    image.src = "{{a.image.url}}";  // ŸÖÿ≥€åÿ± ÿπ⁄©ÿ≥
    image.alt = "Your Image";

    realImage.appendChild(image);
    puzzleContainer.appendChild(realImage);

    setTimeout(() => {
        realImage.classList.add('show');
    }, 100);
}


        document.addEventListener('DOMContentLoaded', function() {
            createPuzzle();
            window.addEventListener('scroll', () => requestAnimationFrame(animatePuzzleOnScroll));
            setTimeout(animatePuzzleOnScroll, 100);
        });

        window.addEventListener('resize', function() {
            puzzleAnimated = false;
            const existingRealImage = document.querySelector('.real-image');
            if (existingRealImage) {
                existingRealImage.remove();
            }
            createPuzzle();
            setTimeout(animatePuzzleOnScroll, 100);
        });








    </script>
<script>
// ŸàŸÇÿ™€å ÿßÿ≥⁄©ÿ±ŸàŸÑ ŸÖ€å‚Äå⁄©ŸÜ€åÿå ÿØ⁄©ŸÖŸá ÿ±Ÿà ŸÜÿ¥ŸàŸÜ ÿ®ÿØŸá
window.onscroll = function() {
    const btn = document.querySelector(".scroll-top-btn");
    if (document.body.scrollTop > 300 || document.documentElement.scrollTop > 300) {
        btn.classList.add("show");
    } else {
        btn.classList.remove("show");
    }
};

// ÿßÿ≥⁄©ÿ±ŸàŸÑ ŸÜÿ±ŸÖ ÿ®Ÿá ÿ®ÿßŸÑÿß
function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
}



















</script>



<script>
    
</script>

</body>
</html>